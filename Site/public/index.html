<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="icon" type="image/png" href="./img/icone.png">
    <title>Home</title>
</head>

<body onchange="myFunction()">
    <div class="navbar">
        <div class="icon-bar">
            <img class="button-menu" style="cursor: pointer;" onclick="Show()" src="./img/menu.png">
            <a href="./index.html"><img class="button-menu" src="./img/logo.png"></a>


        </div>
        <nav>
            <div class="logo">
                <a href="./index.html"><img src="./img/logo.png" alt="logo"></a>
            </div>
            <ul class="menu-area" id="nav-lists" value="0">
                <li><a href="./index.html">Home</a></li>
                <li><a href="./lista.html">Filmes</a></li>
                <li><a href="./chat.html">Chat</a></li>
                <li><a href="./sobre.html">Sobre</a></li>
                <li id="login"><a href="./login.html">Login</a></li>
                <li id="usuario" class="dropdown lado">
                    <a href="javascript:void(0)" class="dropbtn"><span id="perfil"></span></a>
                    <div class="dropdown-content">
                        <a href="#" onclick="logoff()">Sair</a>
                </li>
            </ul>
        </nav>
        </div>

        <div class="container-carousel">
            <img class="mySlides" src="./img/1.png">
            <img class="mySlides" src="./img/2.png">
            <img class="mySlides" src="./img/3.png">
            <img class="mySlides" src="./img/4.png">
        </div>
        <div class="linha"></div>
        <br>
        <div class="container-geral-lista">
            <div class="container-lista">
                <div class="titulo">
                    <h1>Lista de Filmes...</h1>
                </div>
                <div class="lista">
                    <img class="img-lista fica" id="0" onclick="filme_individual(this.id)" src="https://m.media-amazon.com/images/M/MV5BNTZjNzgzZDktNjA1My00MzkwLTgwZTEtMjBkOTcxM2RmMDZjXkEyXkFqcGdeQXVyNzMwOTY2NTI@._V1_SX300.jpg" alt="tt0074877">
                    <img class="img-lista fica" id="1" onclick="filme_individual(this.id)" src="https://m.media-amazon.com/images/M/MV5BYTkzZjkwZGItY2IwYi00Yzg0LTliMjktY2U3ZWZhNTg2OTI3XkEyXkFqcGdeQXVyNjE5MjUyOTM@._V1_SX300.jpg" alt="tt0031108">
                    <img class="img-lista cel-some" id="2" onclick="filme_individual(this.id)" src="https://m.media-amazon.com/images/M/MV5BNjJhY2ExYWYtNTExOS00NjZjLWEzMDItYmEzZWZlNmQ3Zjk2XkEyXkFqcGdeQXVyNzc5MjA3OA@@._V1_SX300.jpg" alt="tt0061613">
                    <img class="img-lista cel-some" id="3" onclick="filme_individual(this.id)" src="https://m.media-amazon.com/images/M/MV5BYTdiNjllZGQtOGY4YS00NTljLWFhNzItYjE3OWE5NjUzZTM4XkEyXkFqcGdeQXVyMTQ2MjQyNDc@._V1_SX300.jpg" alt="tt0068911">
                    <img class="img-lista tab-sumir" id="4" onclick="filme_individual(this.id)" src="https://m.media-amazon.com/images/M/MV5BMTMzNDMxMjc0M15BMl5BanBnXkFtZTcwNDYyODI5Ng@@._V1_SX300.jpg" alt="tt0050152">
                    <button class="botao-seta"><a href="./lista.html"><img src="./img/seta.png"></a></button>
                </div>
            </div>
        </div>
        <br>
        <div class="container-geral-forum">
            <div class="container-forum">
                <div class="imagem-forum">
                    <img src="https://cinemaemcena.com.br/uploads/img4f3917276b635.jpg">
                </div>
                <div class="texto-forum">
                    <h1>Chat</h1>
                    <p>Nosso chat tem como finalidade, criar uma comunidade de apreciadores de filmes antigos indicarem e darem feedback de filmes...
                    </p>
                    <button class="botao-forum"><a href="./forum.html">Participar!</a></button>
                </div>
            </div>
        </div>
        <br>
        <div class="container-geral-forum">
            <div class="container-forum">
                <div class="texto-forum">
                    <h1>Um pouco sobre nós</h1>
                    <p>Comecei a fazer o site pois sou um fã de filmes antigos e acho que o filme consegue mostrar o que o diretor pensa sobre a cultura que o filme está inserido...
                    </p>
                    <button class="botao-forum"><a href="./sobre.html">Saiba mais!</a></button>
                </div>
                <div class="imagem-forum">
                    <img src="./img/sobre-img.jpg">
                </div>
            </div>
        </div>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <div class="footer">
            <br>
            <br>
            <p>Filme Véio © 2021. Todos direitos reservados.</p>
            <br>
            <br>
        </div>

</body>
<script src="./js/main.js"></script>
<script src="./js/carousel.js"></script>
<script>
    'use strict';
    window.onload = ao_entrar;
    let id_filme = " ";
    let id_title = " ";
    let id_src = " ";

    function ao_entrar() {
        entrar_pagina()
        pesquisar_filme()
    }

    function entrar_pagina() {
        if (sessionStorage.login_usuario_meuapp != undefined) {
            usuario.style.display = 'block';
            login.style.display = 'none';
            perfil.innerHTML = sessionStorage.login_usuario_meuapp
        }
    }

    function gerar_numero() {
        var numero_random = Math.floor(Math.random() * 100000)
        for (var contador = String(numero_random).length; contador < 7; contador++) {
            numero_random = '0' + numero_random;
        }
        id_filme = 'tt' + numero_random;
    }

    async function pesquisar_filme() {
        var cont = 0;
        while (cont < 5) {
            var imagem_loop = document.getElementById(`${cont}`);
            gerar_numero();
            //let api_key = '9b975cfc'
            let api_key = 'e0620bd4';
            const url = `https://www.omdbapi.com/?apikey=${api_key}&i=${id_filme}`;
            const data = await fetch(url);
            const response = await data.json();
            const poster = response.Poster;
            const imdb = response.imdbID;
            if (poster == 'N/A') {
                cont--
            } else {
                imagem_loop.src = `${poster}`;
                imagem_loop.alt = `${imdb}`;
            }
            cont++
        }
    }

    function filme_individual(id_mostrado) {
        var id_filme_individual = document.getElementById(id_mostrado);
        id_title = id_filme_individual.alt;
        id_src = id_filme_individual.src;
        window.location.href = `./filme-individual.html?id=${id_title}`;
    }

    function myFunction(x) {
        if (x.matches) { // If media query matches
            navList.classList.add("_Menus-show");
            navList.value = 1;
        } else {
            navList.classList.remove("_Menus-show");
            navList.value = 0;
        }
    }

    var x = window.matchMedia("(max-width: 660px)")
    myFunction(x) // Call listener function at run time
    x.addListener(myFunction) // Attach listener function on state changes
</script>

</html>